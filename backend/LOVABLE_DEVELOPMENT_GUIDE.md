# Lovable 开发指南

## 项目概述

这是一个MCU代码生成器，帮助用户将自然语言需求转换为16位MCU的机器码。主要功能包括：

1. **自然语言理解**: 将用户需求转换为汇编代码
2. **代码编译**: 将汇编代码转换为机器码
3. **错误处理**: 提供详细的编译错误信息
4. **分步调试**: 支持分步骤查看转换过程

## 前端页面设计建议

### 1. 主页面布局
```
┌─────────────────────────────────────┐
│            MCU Copilot              │
├─────────────────────────────────────┤
│ 需求输入框: [________________]      │
│ 生成按钮: [生成代码]                │
├─────────────────────────────────────┤
│ 思考过程:                           │
│ [显示AI的思考过程]                  │
├─────────────────────────────────────┤
│ 汇编代码:                           │
│ [显示生成的汇编代码]                │
├─────────────────────────────────────┤
│ 机器码:                             │
│ [显示编译后的机器码]                │
│ 下载按钮: [下载.bin文件]            │
│ 烧录按钮: [烧录到FPGA]              │
└─────────────────────────────────────┘
```

### 2. 分步调试页面
```
┌─────────────────────────────────────┐
│           分步调试模式               │
├─────────────────────────────────────┤
│ 步骤1: [自然语言转汇编] [查看结果]   │
│ 步骤2: [汇编转机器码]   [查看结果]   │
├─────────────────────────────────────┤
│ 当前步骤结果:                       │
│ [显示当前步骤的详细结果]            │
└─────────────────────────────────────┘
```

## Lovable 开发提示词

```
我需要开发一个MCU代码生成器的前端界面，使用Lovable进行快速原型开发。

**项目背景**：
- 这是一个16位MCU的代码生成工具
- 用户输入自然语言需求，系统生成对应的机器码
- 支持分步调试和错误处理

**核心功能**：
1. 自然语言输入框（支持多行文本）
2. 一键生成按钮
3. 分步骤显示结果（思考过程、汇编代码、机器码）
4. 错误信息显示
5. 下载和烧录功能（后续实现）

**技术要求**：
- 使用现代UI设计，简洁美观
- 响应式布局，支持移动端
- 良好的用户体验，包括加载状态、错误提示
- 支持代码高亮显示

**页面结构**：
1. 主页面：完整的代码生成流程
2. 调试页面：分步骤查看转换过程
3. 帮助页面：使用说明和示例

**交互流程**：
1. 用户输入需求
2. 点击生成按钮
3. 显示加载状态
4. 逐步显示结果
5. 如有错误，显示错误信息
6. 提供下载和烧录选项

**API接口**：
- POST /compile - 完整流程
- POST /nlp-to-assembly - 自然语言转汇编
- POST /assemble - 汇编转机器码
- GET /health - 健康检查

请帮我设计一个现代化的前端界面，包含所有必要的组件和交互逻辑。
```

## 开发建议

### 1. 状态管理
```javascript
// 建议的状态结构
const state = {
  requirement: "",           // 用户输入的需求
  isLoading: false,         // 加载状态
  currentStep: "input",     // 当前步骤
  results: {
    thought: "",            // 思考过程
    assembly: "",           // 汇编代码
    machineCode: [],        // 机器码
    filteredAssembly: "",   // 过滤后的汇编代码
    compileError: null      // 编译错误
  },
  error: null               // 全局错误
}
```

### 2. 错误处理
- 网络错误：显示重试按钮
- 编译错误：高亮显示错误信息
- 输入验证：实时检查输入格式

### 3. 用户体验优化
- 添加加载动画
- 使用代码高亮显示汇编和机器码
- 提供示例需求
- 支持历史记录
- 添加复制功能

### 4. 响应式设计
- 桌面端：多列布局
- 平板端：单列布局
- 移动端：垂直堆叠

## 组件设计建议

### 1. 输入组件
```javascript
// 需求输入框
const RequirementInput = {
  type: "textarea",
  placeholder: "请输入您的需求，例如：我想让LED每隔1秒闪烁一次",
  rows: 4,
  maxLength: 500
}
```

### 2. 结果显示组件
```javascript
// 思考过程显示
const ThoughtDisplay = {
  type: "card",
  title: "AI思考过程",
  content: "显示AI的分析思路和设计过程",
  collapsible: true
}

// 汇编代码显示
const AssemblyDisplay = {
  type: "code-block",
  language: "assembly",
  title: "生成的汇编代码",
  copyButton: true
}

// 机器码显示
const MachineCodeDisplay = {
  type: "code-block",
  language: "hex",
  title: "编译后的机器码",
  copyButton: true
}
```

### 3. 操作按钮
```javascript
// 生成按钮
const GenerateButton = {
  type: "button",
  variant: "primary",
  text: "生成代码",
  loading: "生成中...",
  disabled: "请输入需求"
}

// 下载按钮
const DownloadButton = {
  type: "button",
  variant: "secondary",
  text: "下载.bin文件",
  disabled: "请先生成代码"
}
```

## 样式建议

### 1. 颜色方案
- 主色调：蓝色系 (#3B82F6)
- 成功色：绿色 (#10B981)
- 错误色：红色 (#EF4444)
- 警告色：黄色 (#F59E0B)
- 背景色：浅灰 (#F9FAFB)

### 2. 字体
- 标题：粗体，16-20px
- 正文：常规，14-16px
- 代码：等宽字体，12-14px

### 3. 间距
- 组件间距：16-24px
- 内部间距：8-12px
- 边框圆角：6-8px

## 测试用例

### 1. 基本功能测试
- 输入简单需求，验证生成结果
- 测试错误处理
- 验证加载状态

### 2. 边界情况测试
- 空输入处理
- 超长输入处理
- 特殊字符处理

### 3. 用户体验测试
- 响应式布局
- 键盘导航
- 屏幕阅读器支持

## 部署注意事项

1. **API地址配置**: 确保前端正确配置后端API地址
2. **CORS设置**: 后端已配置允许跨域请求
3. **错误监控**: 建议添加错误日志记录
4. **性能优化**: 考虑添加请求缓存和防抖 