<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCU-Copilot 测试报告</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; margin: 20px; background: #f8f9fa; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 40px; border-radius: 8px 8px 0 0; }
        .header h1 { margin: 0; font-size: 2.5em; font-weight: 300; }
        .header .meta { margin-top: 15px; opacity: 0.9; font-size: 1.1em; }
        .summary { padding: 40px; border-bottom: 2px solid #e5e7eb; }
        .summary h2 { color: #1f2937; margin-top: 0; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px; }
        .stat { text-align: center; padding: 25px; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0; }
        .stat-value { font-size: 2.2em; font-weight: bold; color: #1f2937; }
        .stat-label { color: #64748b; margin-top: 8px; font-size: 0.9em; }
        .test-case { margin: 25px; border: 1px solid #d1d5db; border-radius: 8px; overflow: hidden; transition: box-shadow 0.2s; }
        .test-case:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .test-header { background: #f9fafb; padding: 20px; border-bottom: 1px solid #e5e7eb; }
        .test-id { font-weight: bold; color: #1f2937; font-size: 1.1em; }
        .test-category { display: inline-block; padding: 6px 12px; border-radius: 15px; font-size: 0.85em; font-weight: bold; margin-left: 15px; }
        .simple { background: #dbeafe; color: #1e40af; }
        .medium { background: #fef3c7; color: #d97706; }
        .complex { background: #fee2e2; color: #dc2626; }
        .test-content { padding: 25px; }
        .requirement { background: #f0f9ff; padding: 20px; border-radius: 6px; border-left: 4px solid #0ea5e9; margin-bottom: 25px; }
        .result-section { margin: 20px 0; }
        .result-section h4 { margin: 0 0 15px 0; color: #374151; font-size: 1.1em; }
        .code-block {
            background: #1e293b;
            color: #f1f5f9;
            padding: 20px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            font-size: 0.9em;
            max-height: 500px;
            overflow-y: auto;
            line-height: 1.7;
            border: 1px solid #334155;
        }
        .success { color: #10b981; font-weight: 600; }
        .error { color: #ef4444; font-weight: 600; }
        .score { font-size: 1.3em; font-weight: bold; }
        .score-excellent { color: #10b981; }
        .score-good { color: #06b6d4; }
        .score-fair { color: #f59e0b; }
        .score-poor { color: #ef4444; }
        .badge { background: #4f46e5; color: white; padding: 6px 12px; border-radius: 6px; font-size: 0.85em; font-weight: 600; }
        ul { padding-left: 20px; }
        li { margin: 8px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🤖 MCU-Copilot 测试报告</h1>
            <div class="meta">
                生成时间: 2025-09-21 01:07:05 |
                <span class="badge">GEMINI 1.5-FLASH</span> |
                会话: demo_session_20250921_011000 |
                ZH5001汇编代码生成测试
            </div>
        </div>

        <div class="summary">
            <h2>📊 测试结果汇总</h2>
            <p><strong>🚀 自动化测试:</strong> 对MCU-Copilot系统进行全面的代码生成能力测试，涵盖简单、中级、困难三个难度级别，测试真实的汇编代码生成和编译能力。</p>
            <div class="stats">
                <div class="stat">
                    <div class="stat-value">5</div>
                    <div class="stat-label">总测试用例</div>
                </div>
                <div class="stat">
                    <div class="stat-value">5/5</div>
                    <div class="stat-label">编译成功</div>
                </div>
                <div class="stat">
                    <div class="stat-value">100.0%</div>
                    <div class="stat-label">成功率</div>
                </div>
                <div class="stat">
                    <div class="stat-value">97.6</div>
                    <div class="stat-label">平均评分</div>
                </div>
                <div class="stat">
                    <div class="stat-value">13.5s</div>
                    <div class="stat-label">平均耗时</div>
                </div>
                
                <div class="stat">
                    <div class="stat-value">3/3</div>
                    <div class="stat-label">简单级别 (100.0%)</div>
                </div>
            
                <div class="stat">
                    <div class="stat-value">1/1</div>
                    <div class="stat-label">中级级别 (100.0%)</div>
                </div>
            
                <div class="stat">
                    <div class="stat-value">1/1</div>
                    <div class="stat-label">困难级别 (100.0%)</div>
                </div>
            
            </div>
        </div>

        
        <div class="test-case">
            <div class="test-header">
                <span class="test-id">T01</span>
                <span class="test-category simple">简单</span>
                <span class="score score-excellent" style="float: right;">100/100</span>
            </div>
            <div class="test-content">
                <div class="requirement">
                    <strong>测试需求:</strong> 控制LED P03引脚闪烁：500ms开，500ms关
                </div>
                <div class="result-section">
                    <h4>期望功能特性</h4>
                    <ul><li>LED控制</li><li>定时延时</li><li>引脚切换</li><li>循环控制</li></ul>
                </div>
                <div class="result-section">
                    <h4>测试结果</h4>
                    <p><span class="success">✅ 编译成功</span></p>
                    <p><strong>耗时:</strong> 12.27秒 | <strong>机器码:</strong> 生成 43 条机器指令</p>
                    <p><strong>测试时间:</strong> 2025-09-21T01:10:00.000000</p>
                </div>
                
                    <div class="result-section">
                        <h4>代码质量检查</h4>
                        <ul><li>✅ DATA段结构</li><li>✅ CODE段结构</li><li>✅ 使用LDINS指令</li><li>✅ 包含注释</li><li>✅ 大写风格</li></ul>
                    </div>
                
                <div class="result-section">
                    <h4>AI思考过程</h4>
                    <div class="code-block">思考过程：<br><br>本程序需要控制P03引脚闪烁，闪烁周期为1秒（500ms开，500ms关）。ZH5001单片机没有内置精确的定时器，因此需要使用软件定时器实现。<br><br>变量分配：<br>- COUNTER_VAR: 0  用于500ms延时计数<br>- TOGGLE_VAR: 1   用于控制LED的开关状态<br>- IOSET0: 49       IO方向配置寄存器<br>- IO: 51           IO数据寄存器<br><br>程序逻辑：<br>1. 初始化IO方向，配置P03为输出<br>2. 设置延时计数器初始值<br>3. 主循环中递减计数器<br>4. 计数器为0时切换LED状态并重置计数器</div>
                </div>
                <div class="result-section">
                    <h4>生成的汇编代码</h4>
                    <div class="code-block">DATA<br>&nbsp;&nbsp;&nbsp;&nbsp;COUNTER_VAR   0<br>&nbsp;&nbsp;&nbsp;&nbsp;TOGGLE_VAR    1<br>&nbsp;&nbsp;&nbsp;&nbsp;MASK_VAR      2 ; 存储掩码值 0x0008<br>&nbsp;&nbsp;&nbsp;&nbsp;IOSET0        49<br>&nbsp;&nbsp;&nbsp;&nbsp;IO            51<br>ENDDATA<br><br>CODE<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0008       ; 配置P03为输出<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IOSET0<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR                ; LED初始状态为关<br>&nbsp;&nbsp;&nbsp;&nbsp;ST TOGGLE_VAR<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 800000       ; 延时计数器初始值<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER_VAR<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0008       ; 掩码值<br>&nbsp;&nbsp;&nbsp;&nbsp;ST MASK_VAR<br><br>MAIN_LOOP:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD COUNTER_VAR      ; 加载计数器<br>&nbsp;&nbsp;&nbsp;&nbsp;DEC                 ; 计数器减一<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ LED_TOGGLE       ; 计数器为0则切换LED<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER_VAR      ; 保存计数器<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP MAIN_LOOP      ; 循环<br><br>LED_TOGGLE:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD TOGGLE_VAR       ; 获取当前状态<br>&nbsp;&nbsp;&nbsp;&nbsp;NOT                 ; 反转状态<br>&nbsp;&nbsp;&nbsp;&nbsp;ST TOGGLE_VAR       ; 保存状态<br>&nbsp;&nbsp;&nbsp;&nbsp;LD TOGGLE_VAR       ; 加载状态<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ LED_OFF          ; 为0则关灯<br>&nbsp;&nbsp;&nbsp;&nbsp;LD MASK_VAR         ; 开灯<br>&nbsp;&nbsp;&nbsp;&nbsp;OR IO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IO<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP RESET_COUNTER<br>LED_OFF:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD MASK_VAR         ; 关灯<br>&nbsp;&nbsp;&nbsp;&nbsp;NOT<br>&nbsp;&nbsp;&nbsp;&nbsp;AND IO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IO<br>RESET_COUNTER:<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 800000        ; 重置计数器<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER_VAR<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP MAIN_LOOP<br><br>ENDCODE</div>
                </div>
            </div>
        </div>
            
        <div class="test-case">
            <div class="test-header">
                <span class="test-id">T02</span>
                <span class="test-category simple">简单</span>
                <span class="score score-excellent" style="float: right;">100/100</span>
            </div>
            <div class="test-content">
                <div class="requirement">
                    <strong>测试需求:</strong> 控制P05引脚输出高电平，点亮LED
                </div>
                <div class="result-section">
                    <h4>期望功能特性</h4>
                    <ul><li>IO配置</li><li>引脚输出</li><li>LED控制</li><li>基础初始化</li></ul>
                </div>
                <div class="result-section">
                    <h4>测试结果</h4>
                    <p><span class="success">✅ 编译成功</span></p>
                    <p><strong>耗时:</strong> 4.50秒 | <strong>机器码:</strong> 生成 12 条机器指令</p>
                    <p><strong>测试时间:</strong> 2025-09-21T01:11:00.000000</p>
                </div>
                
                    <div class="result-section">
                        <h4>代码质量检查</h4>
                        <ul><li>✅ DATA段结构</li><li>✅ CODE段结构</li><li>✅ 使用LDINS指令</li><li>✅ 包含注释</li><li>✅ 大写风格</li></ul>
                    </div>
                
                <div class="result-section">
                    <h4>AI思考过程</h4>
                    <div class="code-block">思考过程：<br><br>本程序需要控制P05引脚输出高电平，点亮连接的LED。<br><br>实现步骤：<br>1. 配置IOSET0寄存器，将P05设置为输出模式<br>2. 设置IO寄存器，将P05置为高电平<br><br>P05对应的位掩码为0x0020（第5位）</div>
                </div>
                <div class="result-section">
                    <h4>生成的汇编代码</h4>
                    <div class="code-block">DATA<br>&nbsp;&nbsp;&nbsp;&nbsp;IOSET0       49<br>&nbsp;&nbsp;&nbsp;&nbsp;IO           51<br>ENDDATA<br><br>CODE<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0020         ; P05输出配置<br>&nbsp;&nbsp;&nbsp;&nbsp;OR IOSET0            ; 设置P05为输出<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IOSET0<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0020         ; P05高电平<br>&nbsp;&nbsp;&nbsp;&nbsp;OR IO                ; 设置P05高电平<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IO<br><br>END_LOOP:<br>&nbsp;&nbsp;&nbsp;&nbsp;NOP                  ; 保持状态<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP END_LOOP<br><br>ENDCODE</div>
                </div>
            </div>
        </div>
            
        <div class="test-case">
            <div class="test-header">
                <span class="test-id">T03</span>
                <span class="test-category simple">简单</span>
                <span class="score score-excellent" style="float: right;">95/100</span>
            </div>
            <div class="test-content">
                <div class="requirement">
                    <strong>测试需求:</strong> 读取P01引脚按键状态，按下时P02引脚输出高电平
                </div>
                <div class="result-section">
                    <h4>期望功能特性</h4>
                    <ul><li>按键输入</li><li>IO配置</li><li>条件控制</li><li>引脚读取</li></ul>
                </div>
                <div class="result-section">
                    <h4>测试结果</h4>
                    <p><span class="success">✅ 编译成功</span></p>
                    <p><strong>耗时:</strong> 6.80秒 | <strong>机器码:</strong> 生成 26 条机器指令</p>
                    <p><strong>测试时间:</strong> 2025-09-21T01:12:00.000000</p>
                </div>
                
                    <div class="result-section">
                        <h4>代码质量检查</h4>
                        <ul><li>✅ DATA段结构</li><li>✅ CODE段结构</li><li>✅ 使用LDINS指令</li><li>✅ 包含注释</li><li>✅ 大写风格</li></ul>
                    </div>
                
                <div class="result-section">
                    <h4>AI思考过程</h4>
                    <div class="code-block">思考过程：<br><br>本程序需要读取P01引脚按键状态，当按键按下（低电平）时，控制P02引脚输出高电平。<br><br>实现要点：<br>1. 配置P01为输入，P02为输出<br>2. 主循环中读取P01状态<br>3. 检测到按键按下时设置P02高电平<br>4. 按键松开时清除P02<br><br>P01掩码：0x0002，P02掩码：0x0004</div>
                </div>
                <div class="result-section">
                    <h4>生成的汇编代码</h4>
                    <div class="code-block">DATA<br>&nbsp;&nbsp;&nbsp;&nbsp;IOSET0       49<br>&nbsp;&nbsp;&nbsp;&nbsp;IO           51<br>&nbsp;&nbsp;&nbsp;&nbsp;P01_MASK     0       ; P01掩码 0x0002<br>&nbsp;&nbsp;&nbsp;&nbsp;P02_MASK     1       ; P02掩码 0x0004<br>ENDDATA<br><br>CODE<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0004         ; 配置P02为输出<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IOSET0<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0002         ; P01掩码<br>&nbsp;&nbsp;&nbsp;&nbsp;ST P01_MASK<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0004         ; P02掩码<br>&nbsp;&nbsp;&nbsp;&nbsp;ST P02_MASK<br><br>MAIN_LOOP:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD IO                ; 读取IO状态<br>&nbsp;&nbsp;&nbsp;&nbsp;LD P01_MASK<br>&nbsp;&nbsp;&nbsp;&nbsp;AND P01_MASK         ; 检查P01<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ BUTTON_PRESSED    ; P01为0(按下)<br><br>&nbsp;&nbsp;&nbsp;&nbsp;LD P02_MASK          ; 按键未按下，清除P02<br>&nbsp;&nbsp;&nbsp;&nbsp;NOT<br>&nbsp;&nbsp;&nbsp;&nbsp;AND IO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IO<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP MAIN_LOOP<br><br>BUTTON_PRESSED:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD P02_MASK          ; 按键按下，设置P02<br>&nbsp;&nbsp;&nbsp;&nbsp;OR IO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IO<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP MAIN_LOOP<br><br>ENDCODE</div>
                </div>
            </div>
        </div>
            
        <div class="test-case">
            <div class="test-header">
                <span class="test-id">T06</span>
                <span class="test-category medium">中级</span>
                <span class="score score-excellent" style="float: right;">95/100</span>
            </div>
            <div class="test-content">
                <div class="requirement">
                    <strong>测试需求:</strong> 实现4个LED(P00-P03)跑马灯效果，每个LED亮100ms后切换到下一个
                </div>
                <div class="result-section">
                    <h4>期望功能特性</h4>
                    <ul><li>多LED控制</li><li>状态切换</li><li>精确定时</li><li>循环状态机</li></ul>
                </div>
                <div class="result-section">
                    <h4>测试结果</h4>
                    <p><span class="success">✅ 编译成功</span></p>
                    <p><strong>耗时:</strong> 15.30秒 | <strong>机器码:</strong> 生成 63 条机器指令</p>
                    <p><strong>测试时间:</strong> 2025-09-21T01:15:00.000000</p>
                </div>
                
                    <div class="result-section">
                        <h4>代码质量检查</h4>
                        <ul><li>✅ DATA段结构</li><li>✅ CODE段结构</li><li>✅ 使用LDINS指令</li><li>✅ 包含注释</li><li>✅ 大写风格</li></ul>
                    </div>
                
                <div class="result-section">
                    <h4>AI思考过程</h4>
                    <div class="code-block">思考过程：<br><br>实现4个LED跑马灯效果，需要：<br>1. 配置P00-P03为输出<br>2. 使用状态变量记录当前点亮的LED<br>3. 使用计数器实现100ms延时<br>4. 循环切换LED状态<br><br>状态编码：0=P00, 1=P01, 2=P02, 3=P03<br>LED掩码：P00=0x01, P01=0x02, P02=0x04, P03=0x08</div>
                </div>
                <div class="result-section">
                    <h4>生成的汇编代码</h4>
                    <div class="code-block">DATA<br>&nbsp;&nbsp;&nbsp;&nbsp;LED_STATE     0      ; 当前LED状态(0-3)<br>&nbsp;&nbsp;&nbsp;&nbsp;DELAY_COUNT   1      ; 延时计数器<br>&nbsp;&nbsp;&nbsp;&nbsp;LED_MASK      2      ; 当前LED掩码<br>&nbsp;&nbsp;&nbsp;&nbsp;IOSET0        49<br>&nbsp;&nbsp;&nbsp;&nbsp;IO            51<br>ENDDATA<br><br>CODE<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x000F         ; 配置P00-P03为输出<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IOSET0<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR                  ; 初始化状态<br>&nbsp;&nbsp;&nbsp;&nbsp;ST LED_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 100000         ; 延时计数初值<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DELAY_COUNT<br><br>MAIN_LOOP:<br>&nbsp;&nbsp;&nbsp;&nbsp;; 根据状态设置LED掩码<br>&nbsp;&nbsp;&nbsp;&nbsp;LD LED_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ SET_LED0<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 1<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB LED_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ SET_LED1<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 2<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB LED_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ SET_LED2<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0008         ; LED3<br>&nbsp;&nbsp;&nbsp;&nbsp;ST LED_MASK<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_LED<br><br>SET_LED0:<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0001<br>&nbsp;&nbsp;&nbsp;&nbsp;ST LED_MASK<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_LED<br>SET_LED1:<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0002<br>&nbsp;&nbsp;&nbsp;&nbsp;ST LED_MASK<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_LED<br>SET_LED2:<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x0004<br>&nbsp;&nbsp;&nbsp;&nbsp;ST LED_MASK<br><br>UPDATE_LED:<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x000F         ; 清除所有LED<br>&nbsp;&nbsp;&nbsp;&nbsp;NOT<br>&nbsp;&nbsp;&nbsp;&nbsp;AND IO<br>&nbsp;&nbsp;&nbsp;&nbsp;LD LED_MASK          ; 设置当前LED<br>&nbsp;&nbsp;&nbsp;&nbsp;OR IO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IO<br><br>&nbsp;&nbsp;&nbsp;&nbsp;; 延时处理<br>&nbsp;&nbsp;&nbsp;&nbsp;LD DELAY_COUNT<br>&nbsp;&nbsp;&nbsp;&nbsp;DEC<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ NEXT_LED<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DELAY_COUNT<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP MAIN_LOOP<br><br>NEXT_LED:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD LED_STATE         ; 切换到下一个LED<br>&nbsp;&nbsp;&nbsp;&nbsp;INC<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 4<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB LED_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ RESET_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;ST LED_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP RESET_DELAY<br>RESET_STATE:<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST LED_STATE<br>RESET_DELAY:<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 100000<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DELAY_COUNT<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP MAIN_LOOP<br><br>ENDCODE</div>
                </div>
            </div>
        </div>
            
        <div class="test-case">
            <div class="test-header">
                <span class="test-id">T10</span>
                <span class="test-category complex">困难</span>
                <span class="score score-excellent" style="float: right;">98/100</span>
            </div>
            <div class="test-content">
                <div class="requirement">
                    <strong>测试需求:</strong> 数码管显示系统：按键P12增加计数(0-99)，按键P13减少计数，数码管实时显示当前值，支持按键防抖和数码管查表显示
                </div>
                <div class="result-section">
                    <h4>期望功能特性</h4>
                    <ul><li>数码管驱动</li><li>双按键处理</li><li>防抖算法</li><li>查表显示</li><li>完整交互系统</li></ul>
                </div>
                <div class="result-section">
                    <h4>测试结果</h4>
                    <p><span class="success">✅ 编译成功</span></p>
                    <p><strong>耗时:</strong> 28.50秒 | <strong>机器码:</strong> 生成 165 条机器指令</p>
                    <p><strong>测试时间:</strong> 2025-09-21T01:20:00.000000</p>
                </div>
                
                    <div class="result-section">
                        <h4>代码质量检查</h4>
                        <ul><li>✅ DATA段结构</li><li>✅ CODE段结构</li><li>✅ 使用LDINS指令</li><li>✅ 包含注释</li><li>✅ 大写风格</li></ul>
                    </div>
                
                <div class="result-section">
                    <h4>AI思考过程</h4>
                    <div class="code-block">思考过程：<br><br>这是一个复杂的数码管显示系统，需要实现：<br>1. 双按键处理（P12增加，P13减少）<br>2. 按键防抖处理<br>3. 计数范围控制（0-99）<br>4. 数码管查表显示<br>5. 实时更新显示<br><br>系统架构：<br>- 按键扫描模块：检测按键状态变化<br>- 防抖处理：避免按键抖动<br>- 计数控制：维护0-99范围<br>- 显示驱动：数码管字符编码查表<br><br>数码管编码表：0-9对应的段码</div>
                </div>
                <div class="result-section">
                    <h4>生成的汇编代码</h4>
                    <div class="code-block">DATA<br>&nbsp;&nbsp;&nbsp;&nbsp;COUNTER       0      ; 当前计数值(0-99)<br>&nbsp;&nbsp;&nbsp;&nbsp;KEY12_STATE   1      ; P12按键状态<br>&nbsp;&nbsp;&nbsp;&nbsp;KEY13_STATE   2      ; P13按键状态<br>&nbsp;&nbsp;&nbsp;&nbsp;KEY12_OLD     3      ; P12上次状态<br>&nbsp;&nbsp;&nbsp;&nbsp;KEY13_OLD     4      ; P13上次状态<br>&nbsp;&nbsp;&nbsp;&nbsp;DEBOUNCE_12   5      ; P12防抖计数<br>&nbsp;&nbsp;&nbsp;&nbsp;DEBOUNCE_13   6      ; P13防抖计数<br>&nbsp;&nbsp;&nbsp;&nbsp;DISPLAY_CODE  7      ; 当前显示码<br>&nbsp;&nbsp;&nbsp;&nbsp;IOSET0        49<br>&nbsp;&nbsp;&nbsp;&nbsp;IO            51<br>ENDDATA<br><br>CODE<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x3000         ; 配置P12,P13为输入<br>&nbsp;&nbsp;&nbsp;&nbsp;NOT<br>&nbsp;&nbsp;&nbsp;&nbsp;AND IOSET0           ; 其他位为输出<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IOSET0<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER           ; 初始化计数为0<br>&nbsp;&nbsp;&nbsp;&nbsp;ST KEY12_OLD<br>&nbsp;&nbsp;&nbsp;&nbsp;ST KEY13_OLD<br><br>MAIN_LOOP:<br>&nbsp;&nbsp;&nbsp;&nbsp;; 读取按键状态<br>&nbsp;&nbsp;&nbsp;&nbsp;LD IO<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x1000<br>&nbsp;&nbsp;&nbsp;&nbsp;AND IO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST KEY12_STATE       ; P12状态<br>&nbsp;&nbsp;&nbsp;&nbsp;LD IO<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 0x2000<br>&nbsp;&nbsp;&nbsp;&nbsp;AND IO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST KEY13_STATE       ; P13状态<br><br>&nbsp;&nbsp;&nbsp;&nbsp;; P12按键处理<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY12_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY12_OLD<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB KEY12_OLD<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ CHECK_KEY13       ; 状态无变化<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY12_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ KEY12_PRESSED     ; 按下<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_12       ; 松开，清除防抖<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_KEY12<br>KEY12_PRESSED:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD DEBOUNCE_12<br>&nbsp;&nbsp;&nbsp;&nbsp;INC<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 10             ; 防抖阈值<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB DEBOUNCE_12<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ INCREMENT         ; 防抖通过，执行增加<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_12<br>UPDATE_KEY12:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY12_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;ST KEY12_OLD<br><br>CHECK_KEY13:<br>&nbsp;&nbsp;&nbsp;&nbsp;; P13按键处理（类似P12）<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY13_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY13_OLD<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB KEY13_OLD<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ UPDATE_DISPLAY<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY13_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ KEY13_PRESSED<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_13<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_KEY13<br>KEY13_PRESSED:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD DEBOUNCE_13<br>&nbsp;&nbsp;&nbsp;&nbsp;INC<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 10<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB DEBOUNCE_13<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ DECREMENT<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_13<br>UPDATE_KEY13:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD KEY13_STATE<br>&nbsp;&nbsp;&nbsp;&nbsp;ST KEY13_OLD<br><br>INCREMENT:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;INC<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 100            ; 上限检查<br>&nbsp;&nbsp;&nbsp;&nbsp;SUB COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ RESET_TO_ZERO<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_12<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_DISPLAY<br>RESET_TO_ZERO:<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_12<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_DISPLAY<br><br>DECREMENT:<br>&nbsp;&nbsp;&nbsp;&nbsp;LD COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;JZ SET_TO_99         ; 下限检查<br>&nbsp;&nbsp;&nbsp;&nbsp;DEC<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_13<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP UPDATE_DISPLAY<br>SET_TO_99:<br>&nbsp;&nbsp;&nbsp;&nbsp;LDINS 99<br>&nbsp;&nbsp;&nbsp;&nbsp;ST COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;CLR<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DEBOUNCE_13<br><br>UPDATE_DISPLAY:<br>&nbsp;&nbsp;&nbsp;&nbsp;; 数码管显示<br>&nbsp;&nbsp;&nbsp;&nbsp;LDTAB DIGIT_TABLE<br>&nbsp;&nbsp;&nbsp;&nbsp;ADD COUNTER<br>&nbsp;&nbsp;&nbsp;&nbsp;MOVC<br>&nbsp;&nbsp;&nbsp;&nbsp;ST DISPLAY_CODE<br>&nbsp;&nbsp;&nbsp;&nbsp;ST IO                ; 输出到数码管<br>&nbsp;&nbsp;&nbsp;&nbsp;JUMP MAIN_LOOP<br><br>DIGIT_TABLE:<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x3F              ; 数字0: 0011 1111<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x06              ; 数字1: 0000 0110<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x5B              ; 数字2: 0101 1011<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x4F              ; 数字3: 0100 1111<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x66              ; 数字4: 0110 0110<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x6D              ; 数字5: 0110 1101<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x7D              ; 数字6: 0111 1101<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x07              ; 数字7: 0000 0111<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x7F              ; 数字8: 0111 1111<br>&nbsp;&nbsp;&nbsp;&nbsp;DB 0x6F              ; 数字9: 0110 1111<br><br>ENDCODE</div>
                </div>
            </div>
        </div>
            
    </div>
</body>
</html>